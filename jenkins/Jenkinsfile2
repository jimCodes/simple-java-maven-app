pipeline {
    //def buildHotClass = load('./jenkins/buildHotClass.groovy')
    agent any
    stages {
        stage('build') {
            steps {
                sh 'mvn clean install -T 1C -Dmaven.compile.fork=true -Dmaven.test.skip=true'
            }
        }
        stage('clear old class'){
            steps{
                echo 'clear old class'
                script{
                    println("script println")
                }
            }
        }

        stage('zip class'){
            steps{
                echo 'echo zip class'
//                 echo "module: ${SERVER_NAME}"
//                 echo "class_list: ${CLASS_NAME}"
//                 DIR= getpwd()
//                 echo "DIR=${DIR}"

                script{
//                     def module_name = manager.build.buildVariables.get("SERVER_NAME")
//                     def tag = manager.build.buildVariables.get("TAG")
//                     println("-tag: " + tag)
                       def module_name = "${SERVER_NAME}"
                       def class_list = "${CLASS_NAME_LIST}"
                       def branch = "${branch}"
                       println("-module_name: " + module_name)
                       println("-class_list: " + class_list)
                       println("-branch: " + branch)
                }
            }
        }
    }
}
